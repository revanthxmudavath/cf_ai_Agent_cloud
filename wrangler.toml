name = "agent-db"
main = "src/index.ts"
compatibility_date = "2024-11-22"

# Workers AI binding
[ai]
binding = "AI"

# AI Gateway for observability
# [[ai_gateway]]
# binding = "AI_GATEWAY"
# id = "agent-gateway"

# Durable Objects for agent state
[[durable_objects.bindings]]
name = "AGENT"
class_name = "PersonalAssistant"
script_name = "agent-db"

# D1 Database for persistent storage
[[d1_databases]]
binding = "DB"
database_name = "agent_cloud_db"
database_id = "dd9dba33-fda6-45dc-9348-150b822a4516"

# Vectorize for semantic memory/RAG
[[vectorize]]
binding = "VECTORIZE"
index_name = "agent-memory"

# Workflows for multi step tasks
[[workflows]]
binding = "TASK_WORKFLOW"
name = "task-workflow"
class_name = "TaskWorkflow"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_sqlite_classes = ["PersonalAssistant"]

# Environment variables (optional)
[vars]
ENVIRONMENT = "development"

LLM_MODEL = "@cf/meta/llama-3.3-70b-instruct-fp8-fast"
LLM_MAX_TOKENS = "500"
LLM_TEMPERATURE = "0.7"
RAG_ENABLED = "true"
RAG_TOP_K = "3"

# MCP Tool API Keys (actual values stored in .dev.vars)
OPENWEATHER_API_KEY = "your-openweather-api-key-here"
POSTMARK_API_KEY = "your-postmark-api-key-here"
POSTMARK_FROM_EMAIL = "noreply@yourdomain.com"

# Code Mode Configuration (Optional - defaults set in code)
CODE_EXECUTION_TIMEOUT = "10000"
CONFIRMATION_TIMEOUT = "60000"
MAX_CODE_LENGTH = "5000"